<!DOCTYPE html><html class="default" lang="en"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>@automation-blueprints/dsl - v0.1.0</title><meta name="description" content="Documentation for @automation-blueprints/dsl"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">@automation-blueprints/dsl - v0.1.0</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h2>@automation-blueprints/dsl - v0.1.0</h2></div><div class="tsd-panel tsd-typography"><a id="md:automation-blueprintsdsl" class="tsd-anchor"></a><h1><a href="#md:automation-blueprintsdsl">@automation-blueprints/dsl</a></h1><p>Shared Blueprint DSL schema and validator for the Automation Blueprints Marketplace.</p>
<a id="md:installation" class="tsd-anchor"></a><h2><a href="#md:installation">Installation</a></h2><pre><code class="language-bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">@automation-blueprints/dsl</span>
</code><button>Copy</button></pre>
<a id="md:overview" class="tsd-anchor"></a><h2><a href="#md:overview">Overview</a></h2><p>This package provides JSON Schema validation for automation blueprint definitions. It ensures that blueprint configurations conform to the standardized DSL format before publishing or deployment.</p>
<a id="md:usage" class="tsd-anchor"></a><h2><a href="#md:usage">Usage</a></h2><a id="md:basic-validation" class="tsd-anchor"></a><h3><a href="#md:basic-validation">Basic Validation</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">validateDsl</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@automation-blueprints/dsl&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">blueprint</span><span class="hl-1"> = {</span><br/><span class="hl-1">  </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-2">&#39;bp-slack-notification&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&#39;Slack Notification on CRM Update&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">version:</span><span class="hl-1"> </span><span class="hl-2">&#39;1.0.0&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">apps:</span><span class="hl-1"> [</span><span class="hl-2">&#39;salesforce&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;slack&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">scopes:</span><span class="hl-1"> [</span><span class="hl-2">&#39;crm&#39;</span><span class="hl-1">, </span><span class="hl-2">&#39;messaging&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">trigger:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">app:</span><span class="hl-1"> </span><span class="hl-2">&#39;salesforce&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">event:</span><span class="hl-1"> </span><span class="hl-2">&#39;record_updated&#39;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">retry:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">attempts:</span><span class="hl-1"> </span><span class="hl-7">3</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">delayMs:</span><span class="hl-1"> </span><span class="hl-7">1000</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-4">steps:</span><span class="hl-1"> [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-4">id:</span><span class="hl-1"> </span><span class="hl-2">&#39;notify-team&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">app:</span><span class="hl-1"> </span><span class="hl-2">&#39;slack&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">action:</span><span class="hl-1"> </span><span class="hl-2">&#39;send_message&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">inputs:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">channel:</span><span class="hl-1"> </span><span class="hl-2">&#39;#sales&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-4">text:</span><span class="hl-1"> </span><span class="hl-2">&#39;New CRM update received&#39;</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">};</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">result</span><span class="hl-1"> = </span><span class="hl-0">validateDsl</span><span class="hl-1">(</span><span class="hl-4">blueprint</span><span class="hl-1">);</span><br/><br/><span class="hl-3">if</span><span class="hl-1"> (</span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">ok</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-2">&#39;âœ“ Blueprint is valid&#39;</span><span class="hl-1">);</span><br/><span class="hl-1">} </span><span class="hl-3">else</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-2">&#39;Validation errors:&#39;</span><span class="hl-1">, </span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">errors</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:accessing-the-schema" class="tsd-anchor"></a><h3><a href="#md:accessing-the-schema">Accessing the Schema</a></h3><pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">dslSchema</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@automation-blueprints/dsl&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-8">// Use the raw schema for custom validation or documentation</span><br/><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">log</span><span class="hl-1">(</span><span class="hl-4">dslSchema</span><span class="hl-1">);</span>
</code><button>Copy</button></pre>
<p>You can also import the schema directly:</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> </span><span class="hl-4">schema</span><span class="hl-1"> </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@automation-blueprints/dsl/schema.json&#39;</span><span class="hl-1">;</span>
</code><button>Copy</button></pre>
<a id="md:api-reference" class="tsd-anchor"></a><h2><a href="#md:api-reference">API Reference</a></h2><a id="md:validatedsldsl-unknown-validationresult" class="tsd-anchor"></a><h3><a href="#md:validatedsldsl-unknown-validationresult"><code>validateDsl(dsl: unknown): ValidationResult</code></a></h3><p>Validates a blueprint object against the DSL schema.</p>
<p><strong>Parameters:</strong></p>
<ul>
<li><code>dsl</code> - The blueprint object to validate (can be any type)</li>
</ul>
<p><strong>Returns:</strong> <code>ValidationResult</code> object with the following properties:</p>
<ul>
<li><code>ok: boolean</code> - <code>true</code> if validation passed, <code>false</code> otherwise</li>
<li><code>errors?: string[]</code> - Array of human-readable error messages (only present if validation failed)</li>
<li><code>warnings?: string[]</code> - Array of warning messages (currently unused, reserved for future use)</li>
</ul>
<p><strong>Example:</strong></p>
<pre><code class="language-typescript"><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">result</span><span class="hl-1"> = </span><span class="hl-0">validateDsl</span><span class="hl-1">(</span><span class="hl-4">myBlueprint</span><span class="hl-1">);</span><br/><span class="hl-3">if</span><span class="hl-1"> (!</span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">ok</span><span class="hl-1">) {</span><br/><span class="hl-1">  </span><span class="hl-4">result</span><span class="hl-1">.</span><span class="hl-4">errors</span><span class="hl-1">?.</span><span class="hl-0">forEach</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1"> </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-4">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-4">err</span><span class="hl-1">));</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:dslschema" class="tsd-anchor"></a><h3><a href="#md:dslschema"><code>dslSchema</code></a></h3><p>The exported JSON Schema object that defines the blueprint structure.</p>
<p><strong>Type:</strong> JSON Schema Draft-07 object</p>
<p><strong>Schema ID:</strong> <code>https://automation-blueprints.dev/schema/v0.1</code></p>
<a id="md:blueprint-dsl-structure" class="tsd-anchor"></a><h2><a href="#md:blueprint-dsl-structure">Blueprint DSL Structure</a></h2><p>A valid blueprint must include:</p>
<a id="md:required-fields" class="tsd-anchor"></a><h3><a href="#md:required-fields">Required Fields</a></h3><ul>
<li><strong><code>id</code></strong> (string): Unique identifier (alphanumeric, hyphens, underscores)</li>
<li><strong><code>name</code></strong> (string): Human-readable name (min 3 characters)</li>
<li><strong><code>version</code></strong> (string): Semantic version (e.g., &quot;1.0.0&quot;)</li>
<li><strong><code>apps</code></strong> (string[]): Array of app identifiers used in the blueprint (min 1)</li>
<li><strong><code>trigger</code></strong> (object): The event that starts the automation<ul>
<li><code>app</code> (string): Source application</li>
<li><code>event</code> (string): Event type</li>
<li><code>filters</code> (optional): Array of filter conditions</li>
</ul>
</li>
<li><strong><code>steps</code></strong> (array): Array of action steps (min 1)<ul>
<li>Each step requires: <code>id</code>, <code>app</code>, <code>action</code></li>
<li>Optional: <code>condition</code>, <code>inputs</code>, <code>outputs</code>, <code>transforms</code></li>
</ul>
</li>
</ul>
<a id="md:optional-fields" class="tsd-anchor"></a><h3><a href="#md:optional-fields">Optional Fields</a></h3><ul>
<li><strong><code>scopes</code></strong> (string[]): Categorization tags (e.g., &quot;crm&quot;, &quot;marketing&quot;)</li>
<li><strong><code>retry</code></strong> (object): Retry configuration<ul>
<li><code>attempts</code> (integer): Number of retry attempts (min 1)</li>
<li><code>delayMs</code> (integer): Delay between retries in milliseconds</li>
</ul>
</li>
<li><strong><code>policies</code></strong> (object): Custom policy definitions</li>
<li><strong><code>fixtures</code></strong> (object): Test data fixtures</li>
<li><strong><code>tests</code></strong> (array): Test cases for the blueprint</li>
<li><strong><code>compatibility</code></strong> (object): Platform compatibility metadata</li>
</ul>
<a id="md:error-messages" class="tsd-anchor"></a><h2><a href="#md:error-messages">Error Messages</a></h2><p>Validation errors are returned in a human-readable format:</p>
<pre><code><span class="hl-2">&quot;steps: must have at least 1 items&quot;</span><br/><span class="hl-2">&quot;trigger.app: is a required property&quot;</span><br/><span class="hl-2">&quot;version: must match pattern ^</span><span class="hl-9">\d</span><span class="hl-2">+</span><span class="hl-9">\.\d</span><span class="hl-2">+</span><span class="hl-9">\.\d</span><span class="hl-2">+$&quot;</span>
</code><button>Copy</button></pre>
<a id="md:typescript-support" class="tsd-anchor"></a><h2><a href="#md:typescript-support">TypeScript Support</a></h2><p>This package includes full TypeScript definitions. The <code>ValidationResult</code> interface is exported for type safety:</p>
<pre><code class="language-typescript"><span class="hl-3">import</span><span class="hl-1"> { </span><span class="hl-4">ValidationResult</span><span class="hl-1">, </span><span class="hl-4">validateDsl</span><span class="hl-1"> } </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&#39;@automation-blueprints/dsl&#39;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">function</span><span class="hl-1"> </span><span class="hl-0">checkBlueprint</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">: </span><span class="hl-10">unknown</span><span class="hl-1">): </span><span class="hl-10">ValidationResult</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-0">validateDsl</span><span class="hl-1">(</span><span class="hl-4">data</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button>Copy</button></pre>
<a id="md:schema-versioning" class="tsd-anchor"></a><h2><a href="#md:schema-versioning">Schema Versioning</a></h2><p>Current schema version: <strong>v0.1</strong></p>
<p>The schema follows semantic versioning. Breaking changes will result in a major version bump.</p>
<a id="md:dependencies" class="tsd-anchor"></a><h2><a href="#md:dependencies">Dependencies</a></h2><ul>
<li><code>ajv</code> ^8.12.0 - JSON Schema validator</li>
<li><code>ajv-formats</code> ^2.1.1 - Format validation (e.g., patterns, dates)</li>
</ul>
<a id="md:license" class="tsd-anchor"></a><h2><a href="#md:license">License</a></h2><p>See repository root for license information.</p>
<a id="md:related-packages" class="tsd-anchor"></a><h2><a href="#md:related-packages">Related Packages</a></h2><ul>
<li><a href="../adapters/README.md"><code>@automation-blueprints/adapters</code></a> - Runtime adapters for exporting blueprints to different platforms</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-index-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><h4 class="uppercase">Member Visibility</h4><form><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li></ul></form></div><div class="tsd-theme-toggle"><h4 class="uppercase">Theme</h4><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-index-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#md:automation-blueprintsdsl"><span>@automation-<wbr/>blueprints/dsl</span></a><ul><li><a href="#md:installation"><span>Installation</span></a></li><li><a href="#md:overview"><span>Overview</span></a></li><li><a href="#md:usage"><span>Usage</span></a></li><li><ul><li><a href="#md:basic-validation"><span>Basic <wbr/>Validation</span></a></li><li><a href="#md:accessing-the-schema"><span>Accessing the <wbr/>Schema</span></a></li></ul></li><li><a href="#md:api-reference"><span>API <wbr/>Reference</span></a></li><li><ul><li><a href="#md:validatedsldsl-unknown-validationresult"><span>validate<wbr/>Dsl(dsl: unknown): <wbr/>Validation<wbr/>Result</span></a></li><li><a href="#md:dslschema"><span>dsl<wbr/>Schema</span></a></li></ul></li><li><a href="#md:blueprint-dsl-structure"><span>Blueprint DSL <wbr/>Structure</span></a></li><li><ul><li><a href="#md:required-fields"><span>Required <wbr/>Fields</span></a></li><li><a href="#md:optional-fields"><span>Optional <wbr/>Fields</span></a></li></ul></li><li><a href="#md:error-messages"><span>Error <wbr/>Messages</span></a></li><li><a href="#md:typescript-support"><span>Type<wbr/>Script <wbr/>Support</span></a></li><li><a href="#md:schema-versioning"><span>Schema <wbr/>Versioning</span></a></li><li><a href="#md:dependencies"><span>Dependencies</span></a></li><li><a href="#md:license"><span>License</span></a></li><li><a href="#md:related-packages"><span>Related <wbr/>Packages</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html" class="current"><svg class="tsd-kind-icon" viewBox="0 0 24 24"><use href="assets/icons.svg#icon-1"></use></svg><span>@automation-blueprints/dsl - v0.1.0</span></a><ul class="tsd-small-nested-navigation" id="tsd-nav-container" data-base="."><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>